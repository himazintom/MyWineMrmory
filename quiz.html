<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¯ã‚¤ãƒ³ã‚¯ã‚¤ã‚º - MyWineMemory</title>
    
    <!-- PWAè¨­å®š -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="WineMemory">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    
    <!-- é«˜åº¦ãªã‚¹ã‚¿ã‚¤ãƒ« -->
    <link rel="stylesheet" href="/advanced-style.css">
</head>
<body>
    <!-- Professional Navigation Header -->
    <nav class="main-navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <span class="brand-icon">ğŸ·</span>
                <span class="brand-text">MyWineMemory</span>
            </div>
            
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            
            <div class="navbar-menu" id="navbarMenu">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="/" class="nav-link">
                            <span class="nav-icon">ğŸ </span>
                            <span class="nav-text">ãƒ›ãƒ¼ãƒ </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/quiz.html" class="nav-link active">
                            <span class="nav-icon">ğŸ§ </span>
                            <span class="nav-text">ã‚¯ã‚¤ã‚º</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/analytics.html" class="nav-link">
                            <span class="nav-icon">ğŸ“Š</span>
                            <span class="nav-text">åˆ†æ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <button id="theme-toggle" class="theme-toggle nav-link nav-button" aria-label="ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ">
                            <span class="theme-icon">ğŸŒ™</span>
                            <span class="nav-text">ãƒ†ãƒ¼ãƒ</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <div class="quiz-page">
            <div class="quiz-header">
                <h1>ğŸ§  ãƒ¯ã‚¤ãƒ³çŸ¥è­˜ã‚¯ã‚¤ã‚º</h1>
                <p>ã‚ãªãŸã®ãƒ¯ã‚¤ãƒ³çŸ¥è­˜ã‚’ãƒ†ã‚¹ãƒˆã—ã€ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†</p>
            </div>
            
            <!-- ã‚¯ã‚¤ã‚ºé¸æŠ -->
            <div class="quiz-types" id="quizTypes">
                <div class="quiz-type-card" onclick="startQuiz('basic')">
                    <div class="quiz-icon">ğŸ‡</div>
                    <h3>åŸºæœ¬ã‚¯ã‚¤ã‚º</h3>
                    <p>ãƒ¯ã‚¤ãƒ³ã®åŸºç¤çŸ¥è­˜ã‚’ãƒ†ã‚¹ãƒˆ</p>
                    <div class="card-action">é–‹å§‹ã™ã‚‹</div>
                </div>
                <div class="quiz-type-card" onclick="startQuiz('advanced')">
                    <div class="quiz-icon">ğŸ†</div>
                    <h3>ä¸Šç´šã‚¯ã‚¤ã‚º</h3>
                    <p>ä¸Šç´šè€…å‘ã‘ã®é›£ã—ã„å•é¡Œ</p>
                    <div class="card-action">æŒ‘æˆ¦ã™ã‚‹</div>
                </div>
                <div class="quiz-type-card" onclick="startQuiz('regions')">
                    <div class="quiz-icon">ğŸŒ</div>
                    <h3>ç”£åœ°ã‚¯ã‚¤ã‚º</h3>
                    <p>ä¸–ç•Œã®ãƒ¯ã‚¤ãƒ³ç”£åœ°ã«ã¤ã„ã¦</p>
                    <div class="card-action">å­¦ç¿’ã™ã‚‹</div>
                </div>
                <div class="quiz-type-card" onclick="startQuiz('tasting')">
                    <div class="quiz-icon">ğŸ‘…</div>
                    <h3>ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°</h3>
                    <p>å‘³ã‚ã„ã‚„é¦™ã‚Šã®ç‰¹å¾´</p>
                    <div class="card-action">è©¦ã™</div>
                </div>
            </div>
            
            <!-- ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ  -->
            <div id="quizGame" class="quiz-game hidden">
                <div class="quiz-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">1/10</span>
                </div>
                
                <div class="quiz-content">
                    <div class="quiz-question">
                        <h2 id="questionText"></h2>
                    </div>
                    
                    <div id="questionOptions" class="quiz-options"></div>
                    
                    <div class="quiz-controls">
                        <button id="nextButton" class="btn primary-btn" onclick="nextQuestion()" disabled>æ¬¡ã¸</button>
                        <button class="btn outline-btn" onclick="endQuiz()">çµ‚äº†</button>
                    </div>
                </div>
            </div>
            
            <!-- ã‚¯ã‚¤ã‚ºçµæœ -->
            <div id="quizResults" class="quiz-results hidden">
                <div class="results-content">
                    <h2>ğŸ‰ ã‚¯ã‚¤ã‚ºçµæœ</h2>
                    <div class="result-score">
                        <span class="score-number" id="finalScore">0</span>
                        <span class="score-total">/10</span>
                        <span class="score-label">æ­£è§£</span>
                    </div>
                    <div class="result-message" id="resultMessage"></div>
                    <div class="result-actions">
                        <button class="btn primary-btn" onclick="restartQuiz()">ã‚‚ã†ä¸€åº¦</button>
                        <button class="btn secondary-btn" onclick="backToTypes()">åˆ¥ã®ã‚¯ã‚¤ã‚º</button>
                        <button class="btn outline-btn" onclick="goHome()">ãƒ›ãƒ¼ãƒ ã¸</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
        const quizData = {
            basic: [
                {
                    question: "ãƒ•ãƒ©ãƒ³ã‚¹ã®ä»£è¡¨çš„ãªãƒ¯ã‚¤ãƒ³ç”£åœ°ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["ãƒœãƒ«ãƒ‰ãƒ¼", "ãƒˆã‚¹ã‚«ãƒ¼ãƒŠ", "ãƒŠãƒ‘ãƒãƒ¬ãƒ¼", "ãƒ¢ãƒ¼ã‚¼ãƒ«"],
                    correct: 0
                },
                {
                    question: "èµ¤ãƒ¯ã‚¤ãƒ³ã®ä¸»ãªè‰²ç´ æˆåˆ†ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: ["ã‚¿ãƒ³ãƒ‹ãƒ³", "ã‚¢ãƒ³ãƒˆã‚·ã‚¢ãƒ‹ãƒ³", "ãƒ¬ã‚¹ãƒ™ãƒ©ãƒˆãƒ­ãƒ¼ãƒ«", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«"],
                    correct: 1
                },
                {
                    question: "ã‚·ãƒ£ãƒ³ãƒ‘ãƒ¼ãƒ‹ãƒ¥ã®è£½æ³•ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: ["ã‚·ãƒ£ãƒ«ãƒæ–¹å¼", "ãƒ¡ãƒˆãƒ¼ãƒ‰ãƒ»ã‚·ãƒ£ãƒ³ãƒ—ãƒãƒ¯ãƒ¼ã‚º", "ç‚­é…¸æ³¨å…¥", "è‡ªç„¶ç™ºé…µ"],
                    correct: 1
                },
                {
                    question: "ãƒ¯ã‚¤ãƒ³ã®ã€Œãƒ†ãƒ­ãƒ¯ãƒ¼ãƒ«ã€ã¨ã¯ä½•ã‚’æ„å‘³ã—ã¾ã™ã‹ï¼Ÿ",
                    options: ["ãƒ–ãƒ‰ã‚¦ã®å“ç¨®", "åœŸå£Œãƒ»æ°—å€™ãƒ»é¢¨åœŸ", "é†¸é€ æŠ€è¡“", "ç†ŸæˆæœŸé–“"],
                    correct: 1
                },
                {
                    question: "ã€Œãƒ´ã‚£ãƒ³ãƒ†ãƒ¼ã‚¸ã€ã¨ã¯ä½•ã‚’è¡¨ã—ã¾ã™ã‹ï¼Ÿ",
                    options: ["ãƒ–ãƒ‰ã‚¦ã®åç©«å¹´", "ãƒ¯ã‚¤ãƒ³ã®ä¾¡æ ¼", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«åº¦æ•°", "ç†ŸæˆæœŸé–“"],
                    correct: 0
                }
            ],
            advanced: [
                {
                    question: "ãƒœãƒ«ãƒ‰ãƒ¼ã®å·¦å²¸ã§ä¸»ã«æ ½åŸ¹ã•ã‚Œã‚‹ãƒ–ãƒ‰ã‚¦å“ç¨®ã¯ï¼Ÿ",
                    options: ["ãƒ¡ãƒ«ãƒ­ãƒ¼", "ã‚«ãƒ™ãƒ«ãƒãƒ»ã‚½ãƒ¼ãƒ´ã‚£ãƒ‹ãƒ¨ãƒ³", "ãƒ”ãƒãƒ»ãƒãƒ¯ãƒ¼ãƒ«", "ã‚·ãƒ©ãƒ¼"],
                    correct: 1
                },
                {
                    question: "ãƒãƒ­ãƒ©ã‚¯ãƒ†ã‚£ãƒƒã‚¯ç™ºé…µã®ç›®çš„ã¯ï¼Ÿ",
                    options: ["ç³–åˆ†ã‚’ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã«å¤‰æ›", "é…¸å‘³ã‚’å’Œã‚‰ã’ã‚‹", "è‰²ç´ ã‚’æŠ½å‡º", "ã‚¿ãƒ³ãƒ‹ãƒ³ã‚’é™¤å»"],
                    correct: 1
                },
                {
                    question: "ã€Œã‚°ãƒ©ãƒ³ãƒ»ã‚¯ãƒªãƒ¥ã€ã®æ„å‘³ã¯ï¼Ÿ",
                    options: ["å¤§ããªé†¸é€ æ‰€", "ç‰¹ç´šç•‘", "é•·æœŸç†Ÿæˆ", "é«˜ä¾¡æ ¼å¸¯"],
                    correct: 1
                },
                {
                    question: "ã‚·ãƒ£ãƒ³ãƒ‘ãƒ¼ãƒ‹ãƒ¥ã®ã€Œãƒ‡ã‚´ãƒ«ã‚¸ãƒ¥ãƒãƒ³ã€ã¨ã¯ï¼Ÿ",
                    options: ["ãƒœãƒˆãƒ«è©°ã‚", "æ¾±ã®é™¤å»", "ç³–åˆ†æ·»åŠ ", "ãƒ©ãƒ™ãƒ«è²¼ã‚Š"],
                    correct: 1
                },
                {
                    question: "ãƒãƒ­ãƒ­ãƒ¯ã‚¤ãƒ³ã®ä¸»è¦ãƒ–ãƒ‰ã‚¦å“ç¨®ã¯ï¼Ÿ",
                    options: ["ã‚µãƒ³ã‚¸ãƒ§ãƒ´ã‚§ãƒ¼ã‚¼", "ãƒãƒƒãƒ“ã‚ªãƒ¼ãƒ­", "ãƒãƒ«ãƒ™ãƒ©", "ãƒ‰ãƒ«ãƒã‚§ãƒƒãƒˆ"],
                    correct: 1
                }
            ],
            regions: [
                {
                    question: "ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥ã®ä»£è¡¨çš„ãªç™½ãƒ–ãƒ‰ã‚¦å“ç¨®ã¯ï¼Ÿ",
                    options: ["ã‚·ãƒ£ãƒ«ãƒ‰ãƒ", "ã‚½ãƒ¼ãƒ´ã‚£ãƒ‹ãƒ¨ãƒ³ãƒ»ãƒ–ãƒ©ãƒ³", "ãƒªãƒ¼ã‚¹ãƒªãƒ³ã‚°", "ã‚²ãƒ´ãƒ¥ãƒ«ãƒ„ãƒˆãƒ©ãƒŸãƒŠãƒ¼"],
                    correct: 0
                },
                {
                    question: "ã‚­ãƒ£ãƒ³ãƒ†ã‚£ã¯ã©ã®å›½ã®ãƒ¯ã‚¤ãƒ³ã§ã™ã‹ï¼Ÿ",
                    options: ["ãƒ•ãƒ©ãƒ³ã‚¹", "ã‚¤ã‚¿ãƒªã‚¢", "ã‚¹ãƒšã‚¤ãƒ³", "ãƒ‰ã‚¤ãƒ„"],
                    correct: 1
                },
                {
                    question: "ãƒªã‚ªãƒãƒ¯ã‚¤ãƒ³ã®ä¸»è¦ç”£åœ°å›½ã¯ï¼Ÿ",
                    options: ["ãƒãƒ«ãƒˆã‚¬ãƒ«", "ã‚¹ãƒšã‚¤ãƒ³", "ã‚¢ãƒ«ã‚¼ãƒ³ãƒãƒ³", "ãƒãƒª"],
                    correct: 1
                },
                {
                    question: "ãƒŠãƒ‘ãƒãƒ¬ãƒ¼ãŒã‚ã‚‹ã®ã¯ã©ã®å›½ï¼Ÿ",
                    options: ["ã‚«ãƒŠãƒ€", "ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢", "ã‚¢ãƒ¡ãƒªã‚«", "å—ã‚¢ãƒ•ãƒªã‚«"],
                    correct: 2
                },
                {
                    question: "ãƒ¢ãƒ¼ã‚¼ãƒ«åœ°åŸŸã§æœ‰åãªãƒ–ãƒ‰ã‚¦å“ç¨®ã¯ï¼Ÿ",
                    options: ["ã‚·ãƒ£ãƒ«ãƒ‰ãƒ", "ãƒªãƒ¼ã‚¹ãƒªãƒ³ã‚°", "ãƒ”ãƒãƒ»ã‚°ãƒª", "ã‚²ãƒ´ãƒ¥ãƒ«ãƒ„ãƒˆãƒ©ãƒŸãƒŠãƒ¼"],
                    correct: 1
                }
            ],
            tasting: [
                {
                    question: "ãƒ¯ã‚¤ãƒ³ã®ã€Œãƒœãƒ‡ã‚£ã€ã¨ã¯ä½•ã‚’è¡¨ã—ã¾ã™ã‹ï¼Ÿ",
                    options: ["è‰²ã®æ¿ƒã•", "é¦™ã‚Šã®å¼·ã•", "å‘³ã‚ã„ã®åšã¿", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«åº¦æ•°"],
                    correct: 2
                },
                {
                    question: "ã‚¿ãƒ³ãƒ‹ãƒ³ãŒå¤šã„ãƒ¯ã‚¤ãƒ³ã®ç‰¹å¾´ã¯ï¼Ÿ",
                    options: ["ç”˜ã„", "æ¸‹ã„", "é…¸ã£ã±ã„", "å¡©è¾›ã„"],
                    correct: 1
                },
                {
                    question: "ãƒ¯ã‚¤ãƒ³ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã®æ­£ã—ã„é †åºã¯ï¼Ÿ",
                    options: ["é¦™ã‚Šâ†’å¤–è¦³â†’å‘³ã‚ã„", "å¤–è¦³â†’é¦™ã‚Šâ†’å‘³ã‚ã„", "å‘³ã‚ã„â†’é¦™ã‚Šâ†’å¤–è¦³", "é¦™ã‚Šâ†’å‘³ã‚ã„â†’å¤–è¦³"],
                    correct: 1
                },
                {
                    question: "ãƒ¯ã‚¤ãƒ³ã®ã€Œãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ã€ã¨ã¯ï¼Ÿ",
                    options: ["æœ€åˆã®é¦™ã‚Š", "å£ã®ä¸­ã§ã®ä½™éŸ»", "ãƒ¯ã‚¤ãƒ³ã®è‰²", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«æ„Ÿ"],
                    correct: 1
                },
                {
                    question: "ã€Œãƒ¬ãƒƒã‚°ã€ã‚„ã€Œãƒ†ã‚£ã‚¢ãƒ¼ã‚ºã€ã¨å‘¼ã°ã‚Œã‚‹ã®ã¯ï¼Ÿ",
                    options: ["ãƒ¯ã‚¤ãƒ³ã®è‰²", "ã‚°ãƒ©ã‚¹ã‚’å›ã—ãŸæ™‚ã®é›«", "é¦™ã‚Šã®å¼·ã•", "æ³¡ã®ç´°ã‹ã•"],
                    correct: 1
                }
            ]
        };

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedAnswers = [];

        // ã‚¯ã‚¤ã‚ºé–‹å§‹
        function startQuiz(type) {
            currentQuiz = quizData[type];
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswers = [];
            
            document.getElementById('quizTypes').style.display = 'none';
            document.getElementById('quizGame').classList.remove('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            
            showQuestion();
        }

        // å•é¡Œè¡¨ç¤º
        function showQuestion() {
            const question = currentQuiz[currentQuestionIndex];
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('questionOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option btn';
                button.textContent = option;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });
            
            updateProgress();
            document.getElementById('nextButton').disabled = true;
        }

        // å›ç­”é¸æŠ
        function selectAnswer(selectedIndex) {
            const question = currentQuiz[currentQuestionIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            // é¸æŠçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
                option.disabled = false;
            });
            
            // é¸æŠã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            options[selectedIndex].classList.add('selected');
            
            // ç­”ãˆã‚’è¨˜éŒ²
            selectedAnswers[currentQuestionIndex] = selectedIndex;
            
            // æ­£è§£åˆ¤å®šï¼ˆå³åº§ã«è¡¨ç¤ºï¼‰
            setTimeout(() => {
                options.forEach((option, index) => {
                    option.disabled = true;
                    if (index === question.correct) {
                        option.classList.add('correct');
                    } else if (index === selectedIndex && selectedIndex !== question.correct) {
                        option.classList.add('incorrect');
                    }
                });
                
                if (selectedIndex === question.correct) {
                    score++;
                }
                
                document.getElementById('nextButton').disabled = false;
            }, 500);
        }

        // æ¬¡ã®å•é¡Œ
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= currentQuiz.length) {
                showQuizResults();
            } else {
                showQuestion();
            }
        }

        // çµæœè¡¨ç¤º
        function showQuizResults() {
            document.getElementById('quizGame').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = score;
            
            let message = '';
            const percentage = (score / currentQuiz.length) * 100;
            if (percentage >= 90) {
                message = 'ğŸŒŸ å®Œç’§ï¼ãƒ¯ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã­ï¼';
            } else if (percentage >= 80) {
                message = 'ğŸ‰ ç´ æ™´ã‚‰ã—ã„ï¼ã¨ã¦ã‚‚è©³ã—ã„ã§ã™ã­ï¼';
            } else if (percentage >= 60) {
                message = 'ğŸ‘ ã‚ˆãã§ãã¾ã—ãŸï¼ã‚‚ã†å°‘ã—ã§å®Œç’§ã§ã™ã€‚';
            } else if (percentage >= 40) {
                message = 'ğŸ“š ãªã‹ãªã‹ï¼ã•ã‚‰ã«å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚';
            } else {
                message = 'ğŸŒ± é ‘å¼µã‚Šã¾ã—ãŸï¼åŸºç¤ã‹ã‚‰å¾©ç¿’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚';
            }
            
            document.getElementById('resultMessage').textContent = message;
        }

        // ã‚¯ã‚¤ã‚ºå†é–‹
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswers = [];
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('quizGame').classList.remove('hidden');
            showQuestion();
        }

        // ã‚¯ã‚¤ã‚ºé¸æŠã«æˆ»ã‚‹
        function backToTypes() {
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('quizGame').classList.add('hidden');
            document.getElementById('quizTypes').style.display = 'grid';
        }

        // ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
        function goHome() {
            window.location.href = '/';
        }

        // ã‚¯ã‚¤ã‚ºçµ‚äº†
        function endQuiz() {
            if (confirm('ã‚¯ã‚¤ã‚ºã‚’çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿ')) {
                backToTypes();
            }
        }

        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹æ›´æ–°
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentQuiz.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentQuestionIndex + 1}/${currentQuiz.length}`;
        }

        // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.querySelector('.theme-icon');
            
            const savedTheme = localStorage.getItem('theme') || 
                (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            
            setTheme(savedTheme);
            
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });
            
            function setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                themeIcon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            }
        }

        // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
        function initMobileMenu() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navbarMenu = document.getElementById('navbarMenu');
            
            if (mobileMenuToggle && navbarMenu) {
                mobileMenuToggle.addEventListener('click', () => {
                    mobileMenuToggle.classList.toggle('active');
                    navbarMenu.classList.toggle('active');
                });
                
                document.addEventListener('click', (e) => {
                    if (!mobileMenuToggle.contains(e.target) && !navbarMenu.contains(e.target)) {
                        mobileMenuToggle.classList.remove('active');
                        navbarMenu.classList.remove('active');
                    }
                });
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initMobileMenu();
        });
    </script>
</body>
</html>